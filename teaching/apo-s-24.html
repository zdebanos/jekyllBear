<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Summer 2024/2025 APO | Personal page of Steve (zdebanos)</title><meta name="description" content="Student at FEE CTU"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/teaching/apo-s-24"><link rel="stylesheet" href="/assets/style.css"><body><main><h2 class="title">Personal page of Steve (zdebanos)</h2><nav> <a href="http://zdebanos.cz">Home</a> <a href="http://zdebanos.cz/activities.html">Activities</a> <a href="http://zdebanos.cz/contact.html">Contact</a> <a href="http://zdebanos.cz/teaching/root.html">Teaching</a></nav><article><h1>Summer 2024/2025 APO</h1><p>This page serves as a page for additional materials. The main page is <a href="https://cw.fel.cvut.cz/wiki/courses/b35apo/start">CourseWare</a>.</p><h2 id="lab1-examples">Lab1 Examples</h2><p>Binary to decimal conversion and vice versa, hexadecimal numbers, twoâ€™s complement, C binary operators. <a href="../../assets/APO-Sem1.pdf">Slides</a>.</p><h2 id="lab2-examples">Lab2 Examples</h2><p>Multiplication, IEEE 754. <a href="../../assets/APO-Sem2.pdf">Slides</a></p><h2 id="lab7-examples">Lab7 Examples</h2><p>Jump predictions. <a href="../../assets/APO-Sem7.pdf">Slides</a></p><h2 id="lab9">Lab9</h2><p>Virtual memory, OS syscalls. <a href="../../assets/APO-Sem9.pdf">Slides</a></p><h2 id="lab10">Lab10</h2><p>How to communicate with your MZAPO board using UDP/IP. The example features two source codes, one for the sender (the host PC), the second one for the receiver (the MZAPO board).</p><p><code class="language-plaintext highlighter-rouge">sender.c</code>: The code also switches the terminal to the raw mode, so no enter pressed are needed and makes the control intuitive. Usage: <code class="language-plaintext highlighter-rouge">argv[1]</code> is the MZAPO IP address, <code class="language-plaintext highlighter-rouge">argv[2]</code> is the UDP port.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;termios.h&gt;

#define MAX_BUF 100

int main(int argc, char* argv[])
{
  int sockd;
  struct sockaddr_in my_addr, srv_addr;
  char buf[MAX_BUF];
  int count;
  int addrlen;

  if (argc &lt; 3)
  {
    fprintf(stderr, "Usage: %s ip_address port_number\n", argv[0]);
    exit(1);
  }
  /* Create a UDP socket */
  sockd = socket(AF_INET, SOCK_DGRAM, 0);
  if (sockd == -1)
  {
    perror("Socket creation error");
    exit(1);
  }

  /* Configure client address */
  my_addr.sin_family = AF_INET;
  my_addr.sin_addr.s_addr = INADDR_ANY;
  my_addr.sin_port = 0;

  bind(sockd, (struct sockaddr*)&amp;my_addr, sizeof(my_addr));

  /* Set server address */
  srv_addr.sin_family = AF_INET;
  inet_aton(argv[1], &amp;srv_addr.sin_addr);
  srv_addr.sin_port = htons(atoi(argv[2]));

  /* The raw mode */
  struct termios params, old;
  tcgetattr(0, &amp;params);
  old = params;
  cfmakeraw(&amp;params);
  tcsetattr(0, TCSANOW, &amp;params);

  while (1) {
    /* Read without any enter presses */
    char c = getchar();
    if (c == 'q' || c == 'Q') {
      /* If q or Q is pressed, quit */
      break;
    }
    buf[0] = c;
    sendto(sockd, buf, 1, 0, (struct sockaddr*)&amp;srv_addr, sizeof(srv_addr));
  }

  tcsetattr(0, TCSANOW, &amp;old);
  close(sockd);
  return 0;
}
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">receiver.c</code>: run using <code class="language-plaintext highlighter-rouge">make run TARGET_IP=...</code></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;

#define MAX_BUF 1024
#define MZAPO_PORT 5000

int main(int argc, char* argv[])
{
  int sockd;
  struct sockaddr_in my_name, cli_name;
  char buf[MAX_BUF];
  int status;
  int addrlen;

  /* Create a UDP socket */
  sockd = socket(AF_INET, SOCK_DGRAM, 0);
  if (sockd == -1)
  {
    perror("Socket creation error");
    exit(1);
  }

  /* Configure server address */
  my_name.sin_family = AF_INET;
  my_name.sin_addr.s_addr = INADDR_ANY;
  my_name.sin_port = htons(MZAPO_PORT); /* Defined in a macro */

  status = bind(sockd, (struct sockaddr*)&amp;my_name, sizeof(my_name));

  while (1) {
    addrlen = sizeof(cli_name);
    status = recvfrom(sockd, buf, MAX_BUF, 0,
        (struct sockaddr*)&amp;cli_name, &amp;addrlen);
    printf("Received %d bytes. ", status);
    for (int i = 0; i &lt; status; ++i) {
      putchar(buf[i]);
    }
    putchar('\n');
  }

  close(sockd);
  return 0;
}
</code></pre></div></div></article></main><footer class="bottom-footer"> <!-- <span class="mini-note">You've reached the end of the page. Good job!</span> --> <!--<nav class="sans"><hr><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--> <i>Theme <a href="https://knhash.in/jekyllBear" title="the art">jekyllBear</a> built and maintained by <a href="https://knhash.in" title="the artist">knhash</a> </i></footer>
